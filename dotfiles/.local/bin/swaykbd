#!/bin/sh

swaymsg -r -t get_inputs | \
  grep "xkb_active_layout_name" | \
  awk -F '"' '{print $4}' | \
  sed 's/English (US)/ğŸ‡ºğŸ‡¸ English/g;s/Spanish/ğŸ‡²ğŸ‡½ EspaÃ±ol/g;s/Russian/ğŸ‡·ğŸ‡º Ğ ÑƒÑÑĞºĞ¸Ğ¹/g' | head -1

swaymsg \
  --type subscribe \
  --monitor \
  --raw \
  '["input"]' | \
  jq \
    --raw-output \
    --unbuffered \ '
      select(.change == "xkb_layout") |
        .input.xkb_active_layout_name |
        sub(" \\(US\\)"; "")
    ' | \
      sed --unbuffered 's/English/ğŸ‡ºğŸ‡¸ English/g;s/Spanish/ğŸ‡²ğŸ‡½ EspaÃ±ol/g;s/Russian/ğŸ‡·ğŸ‡º Ğ ÑƒÑÑĞºĞ¸Ğ¹/g'

